<!DOCTYPE html>
<html>
<head>
  <title>Modificar datos.txt</title>
  <script>
    function inicializarArchivo() {
      if (!localStorage.getItem('datos')) {
        localStorage.setItem('datos', ''); // Crear contenido inicial si no existe
      }
    }

    function registrarUbicacion() {
      navigator.geolocation.getCurrentPosition(function(position) {
        const latitud = position.coords.latitude;
        const longitud = position.coords.longitude;
        const fechaHora = new Date().toLocaleString();
        const nuevoRegistro = `Fecha/Hora: ${fechaHora}, teta, Latitud: ${latitud}, Longitud: ${longitud}\n`;

        let contenidoAnterior = localStorage.getItem('datos');
        let nuevoContenido = contenidoAnterior + nuevoRegistro;
        localStorage.setItem('datos', nuevoContenido);

        alert('Archivo actualizado. Nuevo contenido:\n' + nuevoContenido);
      });
    }

    function descargarArchivo() {
      let contenido = localStorage.getItem('datos');
      const blob = new Blob([contenido], { type: 'text/plain' });
      const url = URL.createObjectURL(blob);

      const a = document.createElement('a');
      a.href = url;
      a.download = 'datos.txt'; // Nombre del archivo a crear/actualizar
      document.body.appendChild(a);
      a.style.display = 'none';
      a.click();

      document.body.removeChild(a);
      window.URL.revokeObjectURL(url);
    }
  </script>
</head>
<body onload="inicializarArchivo()">
  <h1>Modificar datos.txt</h1>
  <button onclick="registrarUbicacion()">Registrar Ubicaci√≥n</button>
  <button onclick="descargarArchivo()">Descargar archivo</button>
</body>
</html>
